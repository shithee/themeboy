.formatter_single_unit .CBAtribBtnHover:hover{ color : #06d79c !important; }
.LeftSideFxdIconsSet>button{ box-shadow : 0 3px 8px -1px rgb(0 0 0 / 30%) !important; }
<script>
    function get_action_errors(element) {
    let container = element.closest('.action_main_container').siblings('.actioncontainer');
    let output = {};
    let err = [];
    if (!container.length) {
        return err;
    }
    var flow_type = $('#flow_type').val();
    if (!(container.find('.set_attribute_value').css('display') == 'none')) {
        // if(container.find('.set_attribute_value').is(':visible')){
        output.set_attribute = [];
        container.find('.set_attribute_value #selected_attributes div').each(function() {
            if (!($(this).css('display') == 'none')) { //if($(this).is(':visible')){
                let obj = {};
                obj.id = $(this).find('.set_attr_label').data('id');
                if (obj.id) {
                    let name = $(this).find('.set_attr_label').text();
                    obj.req = global_flow_validator($(this).find('.set_attr_val'), 4, {
                        message : `Set attribute value for ${name} attribute is required`,
                        element : $(this)
                     });
                    if (obj.req) err.push(obj.req);
                }
            }
        });
        if (!output.set_attribute.length) delete output.set_attribute;
    }
    // if (!(container.find('.assign_chat').css('display') == 'none')) {
    //     output.assign_chat = {};
    //     let current_action = {};
    //     let element = container.find('.assign_chat');
    //     current_action.channel = element.find('.message_application').val();
    //     current_action.logic = (element.find('.default_routing_rule').is(':checked')) ? 'default' : 'assign';
    //     if (current_action.logic == 'default') {
    //         current_action.send = (element.find('.send_no_response').is(":checked")) ? true : false;
    //     }
    //     current_action.departments = [];
    //     element.find('.departments #selected_list .input-group-text').each(function() {
    //         let id = $(this).find('.sub_seq').data('id');
    //         current_action.departments.push(id);
    //     });
    //     current_action.agents = [];
    //     element.find('.agents #selected_list .input-group-text').each(function() {
    //         let id = $(this).find('.sub_seq').data('id');
    //         current_action.agents.push(id);
    //     });
    //     current_action.message = get_flow_ip_value(element.find('.send_message_body'));
    //     if (element.find('.toggle_event_feed i').hasClass('fa-toggle-on')) {
    //         current_action.feed = {};
    //         current_action.feed.subject = get_data_from_textbox(element.find('.event_feed_subject'));
    //         current_action.feed.background = element.find('.head_background').val();
    //         current_action.feed.text = element.find('.head_text').val();
    //         current_action.feed.body = get_flow_ip_value(element.find('.event_body'));
    //         if (!(container.find('.assign_chat .image_box .image_link').css('display') == 'none')) {
    //             let link = container.find('.assign_chat .image_box img').data('link');
    //             current_action.feed.image = {};
    //             if (link) {
    //                 current_action.feed.image.link = link;
    //             }
    //             current_action.feed.image.text = get_data_from_textbox(container.find('.assign_chat .image_box .image_link'));
    //         }
    //     }
    //     if (element.find('.toggle_event_button i').hasClass('fa-toggle-on')) {
    //         current_action.button = [];
    //         element.find('.event_buttons .single_event_button').each(function() {
    //             let button = {};
    //             let elemen = $(this);
    //             button.name = get_data_from_textbox(elemen.find('.button_name'));
    //             button.background = elemen.find('.but_background').val();
    //             button.border = elemen.find('.but_border').val();
    //             button.text = elemen.find('.but_text').val();
    //             button.url = get_data_from_textbox(elemen.find('.event_url'));
    //             button.open = elemen.find('.event_open').val();
    //             if (button.name) current_action.button.push(button);
    //         })
    //     }
    //     // if(current_action.message && current_action.message.value){
    //     if ((current_action.departments && current_action.departments.length) || (current_action.agents && current_action.agents.length)) {
    //         output.assign_chat = current_action;
    //     } else {
    //         delete output.assign_chat;
    //     }
    // }
    // if (!(container.find('.add_feed').css('display') == 'none')) {
    //     output.add_feed = {};
    //     let current_action = {};
    //     let element = container.find('.add_feed');
    //     current_action.channel = element.find('.message_application').val();
    //     current_action.feed = {};
    //     current_action.feed.subject = get_data_from_textbox(element.find('.event_feed_subject'));
    //     // console.log(current_action.feed.subject.value);
    //     current_action.feed.background = element.find('.head_background').val();
    //     current_action.feed.text = element.find('.head_text').val();
    //     current_action.feed.body = get_flow_ip_value(element.find('.event_body'));
    //     // console.log(current_action.feed.body);
    //     if (!(container.find('.add_feed .image_box .image_link').css('display') == 'none')) {
    //         let link = container.find('.add_feed .image_box img').data('link');
    //         current_action.feed.image = {};
    //         if (link) {
    //             current_action.feed.image.link = link;
    //         }
    //         current_action.feed.image.text = get_data_from_textbox(container.find('.assign_chat .image_box .image_link'));
    //     }
    //     if (element.find('.toggle_event_button i').hasClass('fa-toggle-on')) {
    //         current_action.button = [];
    //         element.find('.event_buttons .single_event_button').each(function() {
    //             let button = {};
    //             let elemen = $(this);
    //             button.name = get_data_from_textbox(elemen.find('.button_name'));
    //             button.background = elemen.find('.but_background').val();
    //             button.border = elemen.find('.but_border').val();
    //             button.text = elemen.find('.but_text').val();
    //             button.url = get_data_from_textbox(elemen.find('.event_url'));
    //             button.open = elemen.find('.event_open').val();
    //             if (button.name) current_action.button.push(button);
    //         });
    //     }
    //     if (current_action.feed.subject && current_action.feed.subject.value) {
    //         output.add_feed = current_action;
    //     } else {
    //         delete output.add_feed;
    //     }
    // }
    if (!(container.find('.broad_caster').css('display') == 'none')) {
        // if(container.find('.send_message').is(':visible')){
        let err_obj = {};
        output.broad_caster = {};
        // output.broad_caster.to = {};
        output.broad_caster.image = {};
        err_obj.err = global_flow_validator(container.find('.broad_caster .select_filter_segment'), 13, {});
        if (err_obj.err) err.push(err_obj.err);
        output.broad_caster.application = container.find('.message_application').val();
        if (output.broad_caster.application == 8 || output.broad_caster.application > 100) {
            let template_box = container.find('.broad_caster .template_box');
            if (!(template_box.css('display') == 'none')) {
                template_box.find('.fillDynamicGrp').each(function() {
                    let obj = get_data_from_textbox($(this).find('.dynamic_value'));
                    obj.count = $(this).find('.dynamic_value').data('count');
                    err_obj.err = global_flow_validator($(this).find('.dynamic_value'), 4, { name : `Broadcaster template dynamic field ${obj.count}` });
                    if (err_obj.err) err.push(err_obj.err);
                })
            }else {
                err_obj.req = global_flow_validator(container.find('.broad_caster').find('.send_message_body'), 1, { name: 'Broadcaster message' });
                if (err_obj.req) err.push(err_obj.req);
            
                err_obj.max = global_flow_validator(container.find('.broad_caster').find('.send_message_body'), 2, { name: 'Broadcaster message', length : 5000 });
                if (err_obj.max) err.push(err_obj.max);
            }
        } else {
            err_obj.req = global_flow_validator(container.find('.broad_caster').find('.send_message_body'), 1, { name: 'Broadcaster message' });
            if (err_obj.req) err.push(err_obj.req);
            
            err_obj.max = global_flow_validator(container.find('.broad_caster').find('.send_message_body'), 2, { name: 'Broadcaster message', length : 5000 });
            if (err_obj.max) err.push(err_obj.max);
        }
    }
    if (!(container.find('.send_message').css('display') == 'none')) {
        // if(container.find('.send_message').is(':visible')){
        output.send_message = {};
        let err_obj = {};
        err_obj.err = global_flow_validator(container.find('.send_message #added_number_message'), 14, {});
        if (err_obj.err) err.push(err_obj.err);
        output.send_message.application = container.find('.message_application').val();
        if(flow_type==2 && output.send_message.application=="last_contacted_channel"){
            err_obj.err = global_flow_validator(container.find('.link_contact_div'), 22, { text : `Subscriber mapping is required`});
            if (err_obj.err) err.push(err_obj.err);
        }
        if (output.send_message.application == 8 || output.send_message.application > 100) {
            let template_box = container.find('.send_message .template_box');
            if (!(template_box.css('display') == 'none')) {
                template_box.find('.fillDynamicGrp').each(function() {
                    let obj = get_data_from_textbox($(this).find('.dynamic_value'));
                    obj.count = $(this).find('.dynamic_value').data('count');
                    err_obj.err = global_flow_validator($(this).find('.dynamic_value'), 4, { name : `Send template message dynamic field ${obj.count}` });
                    if (err_obj.err) err.push(err_obj.err);
                });

            } else {
                err_obj.req = global_flow_validator(container.find('.send_message').find('.send_message_body'), 1, { name: 'Send message - message' });
                if (err_obj.req) err.push(err_obj.req);
            
                err_obj.max = global_flow_validator(container.find('.send_message').find('.send_message_body'), 2, { name: 'Send message - message', length : 5000 });
                if (err_obj.max) err.push(err_obj.max);
            }
        } else {
            err_obj.req = global_flow_validator(container.find('.send_message').find('.send_message_body'), 1, { name: 'Send message - message' });
            if (err_obj.req) err.push(err_obj.req);
            
            err_obj.max = global_flow_validator(container.find('.send_message').find('.send_message_body'), 2, { name: 'Send message - message', length : 5000 });
            if (err_obj.max) err.push(err_obj.max);
        }
    }
    if (!(container.find('.send_wa_message').css('display') == 'none')) {
        
        let err_obj = {};
        err_obj.err = global_flow_validator(container.find('.send_wa_message #selected_list'), 15, {
            message : 'Send Whatsapp message - group is required'
        });
        if (err_obj.err) err.push(err_obj.err);
        
        err_obj.req = global_flow_validator(container.find('.send_wa_message').find('.send_message_body'), 1, { name: 'Send Whatsapp message - message' });
        if (err_obj.req) err.push(err_obj.req);
            
        err_obj.max = global_flow_validator(container.find('.send_wa_message').find('.send_message_body'), 2, { name: 'Send Whatsapp message - message', length : 5000 });
        if (err_obj.max) err.push(err_obj.max);
    }
    if (!(container.find('.add_user_wa').css('display') == 'none')) {
        
        let err_obj = {};
        err_obj.err = global_flow_validator(container.find('.add_user_wa #selected_list'), 15, {
            message : 'Add user to whatsapp group - group is required'
        });
        if (err_obj.err) err.push(err_obj.err);
        
        err_obj.err = global_flow_validator(container.find('.add_user_wa #added_number_message'), 14, {
            message : 'Add user to whatsapp group - Number is required'
        });
        if (err_obj.err) err.push(err_obj.err);
    }
    if (!(container.find('.remove_user_wa').css('display') == 'none')) {
        
        let err_obj = {};
        err_obj.err = global_flow_validator(container.find('.remove_user_wa #selected_list'), 15, {
            message : 'Remove user to whatsapp group - group is required'
        });
        if (err_obj.err) err.push(err_obj.err);
        
        err_obj.err = global_flow_validator(container.find('.remove_user_wa #added_number_message'), 14, {
            message : 'Remove user to whatsapp group - Number is required'
        });
        if (err_obj.err) err.push(err_obj.err);
    }
    if (!(container.find('.create_wa_group').css('display') == 'none')) {
         
        let err_obj = {};
        err_obj.err = global_flow_validator(container.find('.create_wa_group .group_name'), 4, {
            name : 'Create whatsapp group - group name'
        });
        if (err_obj.err) err.push(err_obj.err);
        
        err_obj.err = global_flow_validator(container.find('.create_wa_group #added_number_message'), 14, {
            message : 'Create whatsapp group - Number is required'
        });
        if (err_obj.err) err.push(err_obj.err);
    }
    if (!(container.find('.trigger_formatter').css('display') == 'none')) {
        
        let err_obj = {};
        err_obj.err = global_flow_validator(container.find('.trigger_formatter .increment_value'), 4, {
            name : 'Trigger formatter - Increment value'
        });
        if (err_obj.err) err.push(err_obj.err);
        
        err_obj.err = global_flow_validator(container.find('.trigger_formatter #selected_list'), 16, {
            message : 'Trigger formatter - Need to select formatter',
            element : container.find('.trigger_formatter .show_select_options')
        });
        if (err_obj.err) err.push(err_obj.err);
        
    }
    if (!(container.find('.reset_formatter').css('display') == 'none')) {
        let err_obj = {};
        err_obj.err = global_flow_validator(container.find('.reset_formatter #selected_list'), 16, {
            message : 'Reset formatter - Need to select formatter',
            element : container.find('.reset_formatter .show_select_options')
        });
        if (err_obj.err) err.push(err_obj.err);
    }
    if (!(container.find('.subscribe_to_sequence').css('display') == 'none')) {
        
        let err_obj = {};
        
        err_obj.err = global_flow_validator(container.find('.subscribe_to_sequence #selected_list'), 16, {
            message : 'Subscribe to sequence - Need to select sequence'
        });
        if (err_obj.err) err.push(err_obj.err);
    }
    if (!(container.find('.add_catagory').css('display') == 'none')) {
        
        let err_obj = {};
        
        err_obj.err = global_flow_validator(container.find('.add_catagory #selected_list'), 17, {
            message : 'Add Category - Need to select category'
        });
        if (err_obj.err) err.push(err_obj.err);
    }
    if (!(container.find('.add_tag').css('display') == 'none')) {
        
        let err_obj = {};
        err_obj.err = global_flow_validator(container.find('.add_tag #selected_list'), 17, {
            message : 'Add Tag - Need to select tag'
        });
        if (err_obj.err) err.push(err_obj.err);
    }
    if (!(container.find('.remove_tag').css('display') == 'none')) {
        // if(container.find('.remove_tag').is(':visible')){
        
        let err_obj = {};
        err_obj.err = global_flow_validator(container.find('.remove_tag #selected_list'), 17, {
            message : 'Remove Tag - Need to select Tag'
        });
        if (err_obj.err) err.push(err_obj.err);
        
    }
    if (!(container.find('.remove_catagory').css('display') == 'none')) {
        
        let err_obj = {};
        err_obj.err = global_flow_validator(container.find('.remove_catagory #selected_list'), 17, {
            message : 'Remove Category - Need to select Category'
        });
        if (err_obj.err) err.push(err_obj.err);
    }
    if (!(container.find('.unsubscribe_to_sequence').css('display') == 'none')) {
        
        let err_obj = {};
        
        err_obj.err = global_flow_validator(container.find('.unsubscribe_to_sequence #selected_list'), 16, {
            message : 'Unsubscribe to sequence - Need to select sequence'
        });
        if (err_obj.err) err.push(err_obj.err);
    }
    if (!(container.find('.click_to_call').css('display') == 'none')) {
        let element = container.find('.click_to_call');
        let err_obj = {};
        if (element.find('select[name=select_route]').val() == "agent") {
            let agent_bl = element.find('#selected_agent').find('input[name=agent]');
            err_obj.err = global_flow_validator(agent_bl, 18, {
                message : 'Click to call - Agent is required'
            });
            if (err_obj.err) err.push(err_obj.err);
        } else {
            err_obj.err = global_flow_validator(element.find('.agent_number'), 4, {
                name : 'Click to call - agent number'
            });
            if (err_obj.err) err.push(err_obj.err);
        }
    }
    if (!(container.find('.open_ticket').css('display') == 'none')) {
        
        let err_obj = {};
        
        err_obj.err = global_flow_validator(container.find('.open_ticket .ticket_sub'), 4, {
            name : 'Open ticket - Subject'
        });
        if (err_obj.err) err.push(err_obj.err);
        
        err_obj.err = global_flow_validator(container.find('.open_ticket .ticket_due'), 4, {
            name : 'Open ticket - Due date'
        });
        if (err_obj.err) err.push(err_obj.err);
    }
    if (!(container.find('.send_email').css('display') == 'none')) {
        // if(container.find('.send_email').is(':visible')){
        let err_obj = {};
        
        err_obj.err = global_flow_validator(container.find('.send_email #added_item_list'), 14, {
            message : 'Send Mail - To address is required',
            cls : '.add_item_val',
            element : container.find('.send_email .add_an_item')
        });
        if (err_obj.err) err.push(err_obj.err);
        
        err_obj.err = global_flow_validator(container.find('.send_email .whatsmail_subject'), 4, {
            name : 'Send Email - Subject'
        });
        if (err_obj.err) err.push(err_obj.err);
        
        err_obj.req = global_flow_validator(container.find('.send_email').find('.whatsmail_body'), 1, { name: 'Send Email - message' });
        if (err_obj.req) err.push(err_obj.req);
            
        err_obj.max = global_flow_validator(container.find('.send_email').find('.whatsmail_body'), 2, { name: 'Send Email - message', length : 5000 });
        if (err_obj.max) err.push(err_obj.max);
        
    }
    if (!(container.find('.cancel_delay').css('display') == 'none')) {
        let cont = container.find('.cancel_delay');
        
        let err_obj = {};
        
        err_obj.err = global_flow_validator(container.find('.cancel_delay #added_item_list'), 14, {
            message : 'Cancel delay - Identifier is required',
            cls : '.add_item_val'
        });
        if (err_obj.err) err.push(err_obj.err);
        
        err_obj.err = global_flow_validator(container.find('.cancel_delay #selected_list'), 16, {
            message : 'Cancel delay - Need to select delay',
            element : container.find('.cancel_delay .show_select_options')
        });
        if (err_obj.err) err.push(err_obj.err);
    }
    output.storage = {};

    if (!(container.find('.create_picky_storage').css('display') == 'none')) {
        let cntr = container.find('.create_picky_storage');
        
        let err_obj = {};
        
        err_obj.err = global_flow_validator(cntr.find('.row_name'), 4, {
            name : 'Create new row - row name'
        });
        if (err_obj.err) err.push(err_obj.err);
    }

    if (!(container.find('.delete_picky_storage').css('display') == 'none')) {
        
        let err_obj = {};
        err_obj.err = global_flow_validator(container.find('.delete_picky_storage #selected_list'), 16, {
            message : 'Delete picky storage - Need to select row'
        });
        if (err_obj.err) err.push(err_obj.err);
    }

    if (!(container.find('.delete_storage_data').css('display') == 'none')) {
        
        let err_obj = {};
        err_obj.err = global_flow_validator(container.find('.delete_storage_data #selected_list'), 16, {
            message : 'Empty picky storage - Need to select row'
        });
        if (err_obj.err) err.push(err_obj.err);
    }

    if (!(container.find('.update_storage_data').css('display') == 'none')) {
        
        let err_obj = {};
        err_obj.err = global_flow_validator(container.find('.update_storage_data #selected_list'), 16, {
            message : 'Update picky storage - Need to select row'
        });
        if (err_obj.err) err.push(err_obj.err);
    }
    return err;
}

  </script>